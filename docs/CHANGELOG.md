# Changelog

## [2.0] - 2025-01-28

### Добавлено

- **Документация:**
  - Полное руководство пользователя (`docs/USER_GUIDE.md`)
  - Описание структуры проекта (`docs/PROJECT_STRUCTURE.md`)
  - Анализ производительности (`docs/PERFORMANCE_ANALYSIS.md`)
  - Правила парсинга для всех поставщиков (`docs/PARSING_RULES.md`)
  - Итоги реорганизации (`docs/REORGANIZATION_SUMMARY.md`)

- **Оптимизация базы данных:**
  - Добавлены составные индексы для оптимизации запросов:
    - `(supplierId, collection, colorNumber)` — для быстрого поиска
    - `(inStock, excludedFromParsing)` — для фильтрации
    - `(supplierId, excludedFromParsing)` — для фильтрации по поставщику

- **Улучшения парсера Аметист:**
  - Исправлен парсинг метража (теперь берется только из колонки G)
  - Поддержка знаков больше/меньше (> 100, < 8)
  - Правильная обработка не целых чисел (76,4)
  - Логика определения наличия: >= 10 — в наличии, < 10 — в наличии с комментарием "ВНИМАНИЕ, МАЛО!"

### Исправлено

- Исправлена ошибка "Failed to fetch fabrics" с fallback на raw SQL
- Улучшена обработка ошибок в API endpoints
- Добавлено логирование для диагностики проблем

### Изменено

- Обновлен README.md с ссылками на новую документацию
- Улучшена структура документации

### Технические детали

- Все изменения протестированы и не ломают существующий функционал
- Индексы добавлены безопасно
- Fallback механизмы добавлены для совместимости

---

## [1.0] - Предыдущие версии

- Базовая функциональность парсинга
- Поддержка 14 поставщиков
- Email интеграция
- Ручные загрузки
- Управление категориями
- Исключения из парсинга


