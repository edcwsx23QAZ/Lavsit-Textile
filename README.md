# Lavsit Textile

Парсер данных наличия и цен тканей от разных поставщиков.

> **Версия:** 2.0  
> **Обновлено:** 2025-01-28

## Описание

Система для автоматического парсинга и отображения данных о наличии тканей от различных поставщиков. Поддерживает парсинг HTML таблиц, Excel файлов и получение данных через email с Excel-вложениями.

## Документация

- **[Руководство пользователя](./docs/USER_GUIDE.md)** — полное описание функционала
- **[Структура проекта](./docs/PROJECT_STRUCTURE.md)** — архитектура и организация
- **[Анализ производительности](./docs/PERFORMANCE_ANALYSIS.md)** — анализ и рекомендации
- **[Итоги реорганизации](./docs/REORGANIZATION_SUMMARY.md)** — выполненная работа

## Возможности

- Парсинг данных от нескольких поставщиков (Artvision, Союз-М, Домиарт)
- Автоматический анализ структуры данных при первом парсинге
- Настройка правил парсинга через интерактивный интерфейс
- Отслеживание изменений структуры данных
- Сводная таблица всех тканей с фильтрацией и поиском
- Управление поставщиками и обновление данных

## Установка

```bash
npm install
```

## Настройка базы данных

```bash
# Генерация Prisma клиента
npm run db:generate

# Создание базы данных
npm run db:push

# Инициализация поставщиков
npm run db:init
```

## Разработка

Приложение запускается на порту 4001 (порт 4000 занят):

```bash
npm run dev
```

Приложение будет доступно по адресу: http://localhost:4001

## Сборка

```bash
npm run build
```

## Запуск

```bash
npm start
```

## Структура проекта

- `app/` - Next.js страницы и API routes
- `components/` - React компоненты
- `lib/parsers/` - Парсеры для разных поставщиков
- `prisma/` - Схема базы данных
- `scripts/` - Вспомогательные скрипты

## Поставщики

Система поддерживает 14 поставщиков:

- **Аметист** — Email (Excel вложения)
- **NoFrames** — Excel по URL
- **Эгида** — Excel по URL (динамический)
- **Нортекс** — Email (Excel вложения)
- **Vektor** — Excel по URL (динамический)
- **Viptextil** — HTML
- **Artefact** — Excel по URL
- **Artvision** — HTML
- **Союз-М** — Excel по URL
- **Домиарт** — Excel по URL
- **Артекс** — Excel по URL
- **TextileData** — HTML
- **TextileNova** — HTML
- **Tex.Group** — Excel по URL

Подробные правила парсинга для каждого поставщика описаны в [Руководстве пользователя](./docs/USER_GUIDE.md#правила-парсинга-для-каждого-поставщика).

## Использование

1. Перейдите на страницу "Поставщики"
2. Для каждого поставщика нажмите "Анализ" для первого парсинга
3. Ответьте на вопросы в диалоговом окне для настройки правил
4. После сохранения правил данные будут автоматически распарсены
5. Просматривайте все ткани на странице "Ткани"

