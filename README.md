# Lavsit Textile

Парсер данных наличия и цен тканей от разных поставщиков.

> **Версия:** 2.0  
> **Обновлено:** 2025-01-28

## Описание

Система для автоматического парсинга и отображения данных о наличии тканей от различных поставщиков. Поддерживает парсинг HTML таблиц, Excel файлов и получение данных через email с Excel-вложениями.

## Документация

- **[Полная документация](./docs/COMPLETE_DOCUMENTATION.md)** — полная техническая документация системы
- **[Полная инструкция пользователя](./docs/COMPLETE_USER_GUIDE.md)** — подробное руководство пользователя
- **[Руководство пользователя](./docs/USER_GUIDE.md)** — краткое описание функционала
- **[Структура проекта](./docs/PROJECT_STRUCTURE.md)** — архитектура и организация
- **[Анализ производительности](./docs/PERFORMANCE_ANALYSIS.md)** — анализ и рекомендации
- **[Итоги реорганизации](./docs/REORGANIZATION_SUMMARY.md)** — выполненная работа

## Возможности

- **14 поставщиков** с различными методами парсинга (HTML, Excel по URL, Email)
- **Автоматический анализ** структуры данных при первом парсинге
- **Интерактивная настройка** правил парсинга
- **Отслеживание изменений** структуры данных
- **Группировка тканей** по коллекциям
- **Множественные фильтры** и поиск (поставщик, наличие, тип, категория, описание)
- **Редактирование данных** вручную (цена, тип, описание)
- **Ручная загрузка** данных (наличие и прайс-листы)
- **Email интеграция** с автоматической проверкой новых писем
- **Категоризация тканей** по цене (16 категорий)
- **Исключения из парсинга** для отдельных тканей
- **Экспорт данных** в Excel
- **Автоматический запуск Check Email** при отсутствии файлов на диске

## Установка

```bash
npm install
```

## Настройка базы данных

```bash
# Генерация Prisma клиента
npm run db:generate

# Создание базы данных
npm run db:push

# Инициализация поставщиков
npm run db:init
```

## Разработка

Приложение запускается на порту 4001 (порт 4000 занят):

```bash
npm run dev
```

Приложение будет доступно по адресу: http://localhost:4001

## Сборка

```bash
npm run build
```

## Запуск

```bash
npm start
```

## Структура проекта

- `app/` - Next.js страницы и API routes
- `components/` - React компоненты
- `lib/parsers/` - Парсеры для разных поставщиков
- `prisma/` - Схема базы данных
- `scripts/` - Вспомогательные скрипты

## Поставщики

Система поддерживает 14 поставщиков:

- **Аметист** — Email (Excel вложения)
- **NoFrames** — Excel по URL
- **Эгида** — Excel по URL (динамический)
- **Нортекс** — Email (Excel вложения)
- **Vektor** — Excel по URL (динамический)
- **Viptextil** — HTML
- **Artefact** — Excel по URL
- **Artvision** — HTML
- **Союз-М** — Excel по URL
- **Домиарт** — Excel по URL
- **Артекс** — Excel по URL
- **TextileData** — HTML
- **TextileNova** — HTML
- **Tex.Group** — Excel по URL

Подробные правила парсинга для каждого поставщика описаны в [Полной инструкции пользователя](./docs/COMPLETE_USER_GUIDE.md#правила-парсинга-для-каждого-поставщика).

## Использование

1. Перейдите на страницу "Поставщики"
2. Для каждого поставщика нажмите "Анализ" для первого парсинга
3. Ответьте на вопросы в диалоговом окне для настройки правил
4. После сохранения правил данные будут автоматически распарсены
5. Просматривайте все ткани на странице "Ткани"

