# –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase

## ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

- **–ü—Ä–æ–µ–∫—Ç**: Lavsit Textile
- **Project ID**: `hduadapicktrcrqjvzvd`
- **Direct Connection**: `postgresql://postgres:[PASSWORD]@db.hduadapicktrcrqjvzvd.supabase.co:5432/postgres`
- **–ü–∞—Ä–æ–ª—å**: `edcwsx123QAZ!`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

–õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å–µ—Ç–∏/IP whitelist –Ω–∞ Supabase Free tier. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - Supabase –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä—è–º—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP –∞–¥—Ä–µ—Å–æ–≤.

**–û—à–∏–±–∫–∞:**
```
P1001: Can't reach database server at `db.hduadapicktrcrqjvzvd.supabase.co:5432`
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å –Ω–µ –≤ whitelist Supabase.

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞. Vercel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ IP –∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ã—á–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã Supabase –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Vercel (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)

Vercel –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://lavsit-textile.vercel.app/api/test-db`
2. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–∞–±–ª–∏—Ü–∞—Ö:
   ```json
   {
     "success": true,
     "message": "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞",
     "tablesCount": 7,
     "tables": ["Supplier", "Fabric", ...],
     "hasRequiredTables": {
       "Supplier": true,
       "Fabric": true,
       ...
     }
   }
   ```

–ï—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç—Å—è –æ—à–∏–±–∫–∞ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∑–Ω–∞—á–∏—Ç:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –ø–∞—É–∑—ã (–Ω–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏, —á—Ç–æ –≤—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (—Ç–∞–±–ª–∏—Ü—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
- DATABASE_URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Vercel

## üìã –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Vercel –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
DATABASE_URL=postgresql://postgres:edcwsx123QAZ!@db.hduadapicktrcrqjvzvd.supabase.co:5432/postgres?schema=public
NEXT_PUBLIC_SUPABASE_URL=https://hduadapicktrcrqjvzvd.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_ilEL1_gyNIxzQCskLJtjNA_2a1iArsq
SUPABASE_SERVICE_ROLE_KEY=sb_secret_Nmrfz9rwXqnrD8TEkQlA_5dm3YIkp
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
vercel env ls --token R7r2N1maVjii1BkkRQvidtls
```

## üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Supabase SQL Editor (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com/dashboard/project/hduadapicktrcrqjvzvd
2. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor** –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
3. –ù–∞–∂–º–∏—Ç–µ **"New Query"**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `prisma/migrations/init_postgresql/migration.sql`
5. –í—Å—Ç–∞–≤—å—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
6. –ù–∞–∂–º–∏—Ç–µ **"Run"** –∏–ª–∏ `Ctrl+Enter` / `Cmd+Enter`
7. –î–æ–∂–¥–∏—Ç–µ—Å—å —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Vercel API (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Vercel —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ API:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MIGRATION_SECRET_KEY`:
   ```bash
   vercel env add MIGRATION_SECRET_KEY production --token R7r2N1maVjii1BkkRQvidtls
   # –í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
   ```

2. –í—ã–∑–æ–≤–∏—Ç–µ API endpoint:
   ```bash
   curl -X POST https://lavsit-textile.vercel.app/api/migrate \
     -H "Authorization: Bearer YOUR_SECRET_KEY"
   ```

## ‚úÖ –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   ```bash
   curl https://lavsit-textile.vercel.app/api/test-db
   ```
   
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `success: true` –∏ —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü.

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü:**
   - `/categories` - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - `/fabrics` - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
   - `/suppliers` - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   - `/palette` - –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ **Table Editor** –≤ Supabase Dashboard
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã: Supplier, Fabric, ParsingRule, DataStructure, EmailAttachment, FabricCategory, ManualUpload

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ:** 
- –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`edcwsx123QAZ!`) —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (`!`)
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ connection string –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è URL-encoding: `edcwsx123QAZ%21`
- –ù–æ Prisma –æ–±—ã—á–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìù –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–∞** - –≤—Å–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase –∞–∫—Ç–∏–≤–Ω—ã

‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã** - DATABASE_URL –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ Vercel

‚ö†Ô∏è **–ú–∏–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è** - —Ç–∞–±–ª–∏—Ü—ã –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ SQL Editor

‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∞** - –≤—Å–µ Server Components –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üÜò –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Vercel –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `DATABASE_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Vercel (—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Vercel: `vercel logs https://lavsit-textile.vercel.app --token R7r2N1maVjii1BkkRQvidtls`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞ –≤ Supabase Dashboard
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Supabase (Settings ‚Üí Database ‚Üí Connection Pooling)

