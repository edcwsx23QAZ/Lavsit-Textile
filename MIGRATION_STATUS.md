# üîß –°—Ç–∞—Ç—É—Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase

## ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ

**–ü—Ä–∏—á–∏–Ω–∞**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

**–û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–∞—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**:
1. ‚ùå Connection Pooler: `Tenant or user not found`
2. ‚ùå –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `getaddrinfo ENOTFOUND db.hduadapicktrcrqjvzvd.supabase.co`
3. ‚ùå Vercel API endpoint: `Can't reach database server`

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ –ø–∞—É–∑—ã (Free tier)
- Network restrictions (IP whitelist)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–±—É–µ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç connection string

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Supabase SQL Editor

### üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π

#### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Supabase SQL Editor

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **https://supabase.com/dashboard/project/hduadapicktrcrqjvzvd**
2. –í –ª–µ–≤–æ–º —Å–∞–π–¥–±–∞—Ä–µ –Ω–∞–π–¥–∏—Ç–µ **"SQL Editor"** –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"New Query"** (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)

#### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏—é

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª: **`apply-migrations-now.sql`** (–Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
2. –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ: **`prisma/migrations/init_postgresql/migration.sql`**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å** SQL —Å–∫—Ä–∏–ø—Ç (143 —Å—Ç—Ä–æ–∫–∏)

**–í–∞–∂–Ω–æ**: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç `CREATE TABLE IF NOT EXISTS "Supplier"` –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π `CREATE INDEX`.

#### –®–∞–≥ 3: –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL

1. –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL –≤ SQL Editor
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SQL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `CREATE TABLE IF NOT EXISTS`)
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Run"** (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Ctrl+Enter` / `Cmd+Enter`)
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ **"Success. No rows returned"** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è CREATE TABLE –∫–æ–º–∞–Ω–¥
- –ò–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü:**

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π SQL –≤ SQL Editor –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü:

```sql
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public'
AND table_type = 'BASE TABLE'
ORDER BY table_name;
```

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã**:
- ‚úÖ Supplier
- ‚úÖ Fabric
- ‚úÖ ParsingRule
- ‚úÖ DataStructure
- ‚úÖ EmailAttachment
- ‚úÖ FabricCategory
- ‚úÖ ManualUpload

**–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã** (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑):
```sql
SELECT indexname, tablename 
FROM pg_indexes 
WHERE schemaname = 'public'
ORDER BY tablename, indexname;
```

#### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ API

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **https://lavsit-textile.vercel.app/api/test-db**
2. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON —Å:
   ```json
   {
     "success": true,
     "message": "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞",
     "tablesCount": 7,
     "tables": ["Supplier", "Fabric", ...],
     "hasRequiredTables": {
       "Supplier": true,
       "Fabric": true,
       ...
     }
   }
   ```

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase | ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞ | –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∏–ª–∏ —Ä—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π |
| –ú–∏–≥—Ä–∞—Ü–∏–∏ SQL | ‚úÖ –ì–æ—Ç–æ–≤—ã | –§–∞–π–ª `apply-migrations-now.sql` —Å–æ–∑–¥–∞–Ω |
| –¢–∞–±–ª–∏—Ü—ã | ‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ | –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| Vercel deployment | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ù–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ |
| API endpoints | ‚ö†Ô∏è –û—à–∏–±–∫–∏ 500 | –ò–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Vercel API

```bash
curl https://lavsit-textile.vercel.app/api/test-db
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è `success: true` –∏ —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Supabase Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **https://supabase.com/dashboard/project/hduadapicktrcrqjvzvd**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Table Editor"** (–ª–µ–≤—ã–π —Å–∞–π–¥–±–∞—Ä)
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –≤—Å–µ 7 —Ç–∞–±–ª–∏—Ü

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ SQL Editor

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–∏—Ü:

```sql
SELECT COUNT(*) as table_count
FROM information_schema.tables 
WHERE table_schema = 'public'
AND table_type = 'BASE TABLE';
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è `7` (–µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ).

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–µ—Å–ª–∏ —Ä—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ)

### –ú–µ—Ç–æ–¥ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Supabase CLI

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ Supabase CLI:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI
npm install -g supabase

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–Ω—É–∂–µ–Ω Management API token —Ñ–æ—Ä–º–∞—Ç–∞ sbp_...)
supabase login

# –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º
supabase link --project-ref hduadapicktrcrqjvzvd

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
supabase db push
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Service Role Key (`sb_secret_...`) –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è CLI. –ù—É–∂–µ–Ω Management API token —Ñ–æ—Ä–º–∞—Ç–∞ `sbp_...`.

### –ú–µ—Ç–æ–¥ 2: –ß–µ—Ä–µ–∑ Supabase Management API

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å Management API token, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö REST API –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## üìù SQL —Ñ–∞–π–ª –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

–§–∞–π–ª —Å –≥–æ—Ç–æ–≤—ã–º SQL: **`apply-migrations-now.sql`** (—É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–µ—Å—å SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π. –ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ Supabase SQL Editor.

## ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

1. ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã
2. ‚úÖ –í—Å–µ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
3. ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: https://lavsit-textile.vercel.app/api/test-db
4. ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. ‚úÖ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

---

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏**: –ü–æ—Å–ª–µ –ø–æ–ø—ã—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π  
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SQL Editor  
**Project ID**: hduadapicktrcrqjvzvd  
**Project URL**: https://hduadapicktrcrqjvzvd.supabase.co


