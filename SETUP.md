# Инструкция по настройке проекта Lavsit Textile

## Быстрый старт

1. **Установите зависимости:**
   ```bash
   npm install
   ```

2. **Настройте базу данных:**
   ```bash
   # Генерация Prisma клиента
   npm run db:generate

   # Создание базы данных (SQLite)
   npm run db:push

   # Инициализация поставщиков
   npm run db:init
   ```

3. **Запустите приложение:**
   ```bash
   npm run dev
   ```

   Приложение будет доступно по адресу: **http://localhost:4001**

## Первый запуск

После запуска приложения:

1. Перейдите на страницу **"Поставщики"** (`/suppliers`)
2. Для каждого поставщика:
   - Нажмите кнопку **"Анализ"** для первого парсинга
   - Ответьте на вопросы в диалоговом окне для настройки правил парсинга
   - После сохранения правил данные будут автоматически распарсены
3. Перейдите на страницу **"Ткани"** (`/fabrics`) для просмотра всех данных

## Структура данных

База данных SQLite создается автоматически в `prisma/dev.db`.

### Модели данных:

- **Supplier** - информация о поставщиках
- **Fabric** - данные о тканях
- **ParsingRule** - правила парсинга для каждого поставщика
- **DataStructure** - снимки структуры данных для отслеживания изменений

## Особенности парсеров

### Artvision
- Парсит HTML таблицу со страницы
- Колонки: коллекция+цвет, наличие, метраж, дата поступления

### Союз-М
- Скачивает Excel файл
- Колонки: B (коллекция+цвет), C (наличие), D (дата), E (комментарий)

### Домиарт
- Скачивает Excel файл
- Колонки: A (коллекция+цвет), B (наличие), C (дата)
- **Особенность:** Специальное правило для коллекции "Alfa 2303"

## Предупреждения

При изменении структуры данных (количество колонок, заголовки и т.д.) система автоматически выведет предупреждение на экран.

## Порт

Приложение настроено на порт **4001** (порт 4000 занят другим проектом). Это позволяет одновременно запускать оба проекта.

Для изменения порта отредактируйте скрипты в `package.json`:
```json
"dev": "next dev -p 4001"
```


